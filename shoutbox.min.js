var shoutBox=function(){function o(){var o=["Small","Blue","Fatty","Pink"],t=["Bear","Potato","Banana","Kiwi"],e=Math.floor(Math.random()*o.length),s=Math.floor(Math.random()*t.length);return o[e]+t[s]}function t(){return void 0===$rootScope.appConfig||$rootScope.appConfig.loggedIn===!1?(setTimeout(function(){t()},5e3),!1):(console.log("shoutBox module loaded"),void $(function(){$(".shoutbox").show(),$(".shoutbox__header").on("click",function(o){var t=$(".shoutbox__body").css("display");$(".shoutbox__body").slideToggle(200),"block"==t?$(".shoutbox__header i").attr("class","icon-circle-arrow-up"):$(".shoutbox__header i").attr("class","icon-circle-arrow-down")}),$("#shoutbox__new_message").keypress(function(o){if(13==o.which){var t=$(this).val();s(t),$(this).val("")}}),i=$rootScope.appConfig.login||o()}))}function e(o,t){var e=(new Date).toLocaleTimeString().toString(),s='<div class="shoutbox__message"><img src="http://test2.dataiku.com:6500/dip/api/image/get-image?type=USER&id='+o+"&size=20x20&hash="+$rootScope.userPicturesHash+'" alt="" /><span class="name">'+o+'</span><span class="time">'+e+"</span>"+t+"</div>";$(".shoutbox__messages").append(s).children(":last").hide().fadeIn();var n=$(".shoutbox__messages")[0].scrollHeight;$(".shoutbox__messages").scrollTop(n),o!==i&&a()}function s(o){e(i,o),Notification.broadcastToOtherSessions("shoutbox-receive-message",{from:i,message:o})}function a(){$("#shoutbox__sound").trigger("play")}var i="Unknown";return Notification.registerEvent("shoutbox-receive-message",function(o,t){e(t.from,t.message)}),{init:t}}();shoutBox.init();
