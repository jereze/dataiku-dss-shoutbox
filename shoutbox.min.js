var shoutBox=function(){function o(){var o=["Small","Blue","Fatty","Pink"],e=["Bear","Potato","Banana","Kiwi"],t=Math.floor(Math.random()*o.length),s=Math.floor(Math.random()*e.length);return o[t]+e[s]}function e(){return void 0===$rootScope.appConfig||$rootScope.appConfig.loggedIn===!1?(setTimeout(function(){e()},5e3),!1):(console.log("shoutBox module loaded"),void $(function(){$(".shoutbox").show(),$(".shoutbox__header").on("click",function(o){var e=$(".shoutbox__body").css("display");$(".shoutbox__body").slideToggle(200),"block"==e?$(".shoutbox__header i").attr("class","icon-circle-arrow-up"):$(".shoutbox__header i").attr("class","icon-circle-arrow-down")}),$("#shoutbox__new_message").keypress(function(o){if(13==o.which){var e=$(this).val();s(e),$(this).val("")}}),a=$rootScope.appConfig.login||o()}))}function t(o,e){var t=(new Date).toLocaleTimeString().toString(),s='<div class="shoutbox__message"><img src="http://test2.dataiku.com:6500/dip/api/image/get-image?type=USER&id='+o+"&size=20x20&hash="+$rootScope.userPicturesHash+'" alt="" /><span class="name">'+o+'</span><span class="time">'+t+"</span>"+e+"</div>";$(".shoutbox__messages").append(s).children(":last").hide().fadeIn();var a=$(".shoutbox__messages")[0].scrollHeight;$(".shoutbox__messages").scrollTop(a)}function s(o){t(a,o),Notification.broadcastToOtherSessions("shoutbox-receive-message",{from:a,message:o})}var a="Unknown";return Notification.registerEvent("shoutbox-receive-message",function(o,e){t(e.from,e.message)}),{init:e}}();shoutBox.init();
